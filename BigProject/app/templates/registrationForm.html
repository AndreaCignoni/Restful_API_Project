<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <title>Registration Form</title>
</head>
<body>
    <form id="registrationForm">
        <!-- Your registration form inputs here -->
        First Name<br><input type="text" id="fname" name="fname" autocomplete="given-name" required><br>
        <!-- autocomplete="given-name" for first name -->
        Last Name<br><input type="text" id="lname" name="lname" autocomplete="family-name" required><br>
        <!-- autocomplete="family-name" for last name -->
        Gender<br>
        male<input type="radio" id="male" name="gender" value="male">
        female<input type="radio" id="female" name="gender" value="female"><br>
        Nationality<br><input type="text" id="nationality" name="nationality" autocomplete="country" required><br>
        <!-- autocomplete="country" for nationality -->
        Email<br><input type="email" id="email" name="email" autocomplete="email" required><br>
        <!-- autocomplete="email" for email -->
        Username<br><input type="text" id="username" name="username" autocomplete="username" required><br>
        <!-- autocomplete="username" for username -->
        Password<br><input type="password" id="password" name="password" autocomplete="new-password" required><br>
        <!-- autocomplete="new-password" for password -->
        <button type="submit" id="submitBtn" class="btn btn-secondary">Submit</button>
    </form>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        // Function to create a new user
        function createUser(user, callback){
            $.ajax({
                url: "/registration_form",
                method: "POST",
                data: JSON.stringify(user),
                contentType: "application/json; charset=utf-8",
                success: function(result){
                    // Handle success
                    console.log(result);
                    callback(result);
                },
                error: function(xhr, status, error){
                    // Handle error
                    console.log("Error: " + status + " Message: " + error);
                }
            });
        }
    
        $(document).ready(function() {
            const form = document.getElementById('registrationForm');
    
            // Add submit event listener to registration form
            form.addEventListener('submit', async (event) => {
                event.preventDefault(); // Prevent default form submission
    
                // Serialize form data into JSON
                const formData = {
                    fname: form.fname.value,
                    lname: form.lname.value,
                    gender: form.gender.value,
                    nationality: form.nationality.value,
                    email: form.email.value,
                    username: form.username.value,
                    password: form.password.value
                };
    
                // Call createUser function to create user
                createUser(formData, function(result) {
                    console.log(result); // Log success message or error
                });
            });
        });
    </script>       
</body>
</html>